# Blog Service Plan

## Categories

### Category: Content Model

#### Intent

- Goal: 게시물 데이터 모델과 작성 플로우를 frontmatter 중심으로 통일해 생성·수정·표시를 한 규칙으로 관리한다.
- Success: 모든 게시물에서 `title`·`description`이 필수화되고 리스트·본문·편집 기능이 파일명 의존 없이 일관되게 동작한다.

#### Context

- Current State: 현재 리스트는 파일명 기반 노출이 있고 본문에는 frontmatter를 제외하면 `# 제목` 항목이 없으며 게시물 생성과 내용·타이틀·URL 수정 기능이 분산되어 있다.
- Constraints: 기존 마크다운 본문 스타일은 유지하면서 frontmatter 기준의 표시 규칙을 강제해야 한다.
- Trend Signal: 요청 범위가 메타데이터 정규화와 게시물 작성/수정 기능 통합을 동시에 요구한다.

#### Idea

- What: frontmatter에 `title`·`description`을 추가하고 리스트에서 파일명 대신 `title`·`description`을 표시하며 본문 상단 제목을 frontmatter `title`로 고정하고 게시물 추가 및 내용·타이틀·URL 변경 기능을 제공한다.
- How: frontmatter 스키마 검증 도입 -> 리스트/상세 렌더를 frontmatter 기준으로 전환 -> 작성 화면에서 생성과 수정 기능을 단일 흐름으로 통합한다.
- Why: 파일명 중심 표현을 제거하고 콘텐츠 메타데이터 중심 운영으로 전환해야 편집 효율과 노출 품질을 동시에 확보할 수 있다.
- Impact: 게시물 품질 기준이 명확해지고 사용자에게 보이는 정보의 일관성이 높아진다.
- Risk: 기존 문서 중 frontmatter 누락 게시물은 마이그레이션 없으면 렌더링 예외가 발생할 수 있다.

---

### Category: Brand Surface

#### Intent

- Goal: 블로그 전역의 식별 텍스트와 외부 채널 링크를 동일한 브랜드 규칙으로 고정한다.
- Success: 리스트 `@` 표기와 게시물 경로가 사이트 타이틀 기반으로 동작하고 모든 페이지에 동일한 공통 푸터 링크가 노출된다.

#### Context

- Current State: 리스트의 `@yena` 표기가 고정 문자열이고 게시물 표기 규칙이 사이트 타이틀과 분리되어 있으며 공통 푸터가 없다.
- Constraints: 푸터에는 GitHub(`https://github.com/i2na`), bio(`https://yena.io.kr`), blog(`https://blog.yena.io.kr`), email(`yena@moss.land`), instagram(`https://instagram.com/2ye._na`)을 그대로 포함해야 한다.
- Trend Signal: 요청 내용이 기능 확장과 함께 브랜드 식별 표기의 일관성을 명시한다.

#### Idea

- What: 리스트의 `@` 뒤 값은 사이트 타이틀명으로 동적 표시하고 게시물 페이지는 `사이트타이틀/filename.md` 형식으로 표시하며 모든 페이지에 공통 푸터를 추가한다.
- How: 사이트 타이틀 설정값 단일화 -> 리스트/상세 표기 컴포넌트 동기화 -> 전역 레이아웃에 공통 푸터를 삽입한다.
- Why: 페이지마다 다른 식별 표기를 제거해야 사용자 인지와 서비스 신뢰를 안정적으로 유지할 수 있다.
- Impact: 브랜딩 일관성과 외부 채널 유입 동선이 강화된다.
- Risk: 사이트 타이틀 변경 시 캐시 반영 지연이 있으면 일시적 표기 불일치가 발생할 수 있다.

---

### Category: Access Loop

#### Intent

- Goal: 회원가입 없는 구글 이메일 접속 경험을 중심으로 조회수·댓글·구독 참여 루프를 단순하게 완성한다.
- Success: 로그인 버튼이 `Continue with Google` 단일 문구로 직관화되고 구글 로그인 후 조회수·댓글·대댓글·구독 기능이 즉시 사용 가능하며 게시물 반응 표시는 조회수만 노출되고 닉네임은 구글 계정의 이메일 연결 이름으로 고정된다.

#### Context

- Current State: 현재 로그인 버튼은 단순 표기이며 조회수·댓글·대댓글·구독 기능이 없다.
- Constraints: 프로필 사진은 사용하지 않고 닉네임은 사용자가 수정할 수 없으며 로그인 진입은 최소 단계로 구성해야 한다.
- Trend Signal: 요청이 인증 UX 버튼 카피를 짧고 직관적으로 단순화하고 참여 기능을 로그인 직후 바로 사용 가능한 구조로 요구한다.

#### Idea

- What: 상단 인증 CTA를 `Continue with Google` 단일 버튼으로 교체하고 로그인 사용자의 닉네임을 구글 계정 이름으로 자동 고정하며 조회수·댓글·대댓글과 public 게시물 이메일 구독 알림 기능을 제공하고 게시물 반응은 조회수만 표시한다.
- How: 버튼 카피를 영어 단일 행동 문구로 고정 -> Google OAuth 단일 플로우 연결 -> 사용자 식별·조회·댓글·구독 모델을 한 세션 규칙으로 통합한다.
- Why: 인증 장벽을 낮추고 참여 기능 접근을 단순화해야 방문자가 즉시 상호작용으로 전환된다.
- Impact: 로그인 전환율과 참여 지표가 동시에 상승하고 사용자 식별 규칙이 명확해진다.
- Risk: 구글 인증 의존도가 높아지면 외부 인증 장애 시 참여 기능 접근성이 낮아질 수 있다.

---

### Category: Discovery UX

#### Intent

- Goal: 탐색 기능과 시각 디자인을 심플한 라이트 모드 기준으로 정리하고 홈 차트를 창의적 지표 중심으로 차별화한다.
- Success: 제목/내용 검색, public/private 필터, 최신순·오래된순·조회수순·이름순 정렬이 단순 UI로 동작하고 홈 차트가 `Pixel Weather`(시간대 방문 열지도), `Deep Dive`(스크롤 80% 이상 비율), `Comeback Loop`(7일 재방문률), `Maker Rhythm`(주간 게시 리듬)을 시각화한다.

#### Context

- Current State: 필터·정렬·차트 기능이 부재하고 전체 디자인 개선 요구가 있으며 마크다운 관련 CSS는 변경 금지다.
- Constraints: 은은한 그라데이션이 있는 심플하고 고급스러운 라이트 모드를 적용하되 본문 마크다운 CSS는 수정하지 않아야 한다.
- Trend Signal: 요청이 가독성 중심 디자인과 재미있는 지표형 홈 차트를 동시에 요구한다.

#### Idea

- What: 검색·필터·정렬을 단일 탐색 패널로 묶고 라이트 테마를 재구성하며 UI 목적의 창의적 홈 차트 4종 지표를 추가한다.
- How: 탐색 컨트롤 단순화 -> 라이트 시각 시스템과 타이포 재정의(마크다운 CSS 제외) -> 차트 지표 수집 이벤트와 시각 컴포넌트를 연결한다.
- Why: 탐색 효율과 시각 재미를 함께 높여야 콘텐츠 소비와 재방문 동기를 동시에 확보할 수 있다.
- Impact: 사용자는 원하는 글을 빠르게 찾고 블로그 활동 상태를 직관적으로 이해한다.
- Risk: 지표 계산 이벤트가 과도하면 성능과 데이터 수집 복잡도가 증가할 수 있다.

---

### Category: Media Workflow

#### Intent

- Goal: 드래그앤드랍 기반 미디어 삽입을 로컬 저장·URL 발급·게시 상태 정리까지 하나의 확정 규칙으로 운영한다.
- Success: 에디터에서 커서 위치 드롭 즉시 URL이 삽입되고 게시 확정 파일만 로컬에 남으며 확장자별 용량 제한과 무손실 최적화 규칙이 항상 적용된다.

#### Context

- Current State: 현재는 GitHub 유사 드래그앤드랍 업로드, 커서 기준 즉시 삽입, 게시 상태 기반 파일 정리, 확장자별 제한 정책이 없다.
- Constraints: Cloudflare/AWS 없이 로컬 Finder 폴더를 사용해야 하고 private/public으로 실제 게시된 이미지·동영상만 보관해야 한다.
- Trend Signal: 요청이 작성 편의성 강화와 로컬 자산 통제를 동시에 강조하고 화질 손상 없는 저장을 강하게 요구한다.

#### Idea

- What: 이미지·동영상 드래그앤드랍 시 커서 위치에 URL을 즉시 삽입하고 로컬 저장소에 기록하며 게시 확정된 private/public 파일만 유지하고 미게시 파일은 삭제하며 지원 확장자를 이미지 `jpg/jpeg 20MB`, `png 30MB`, `webp 20MB`, `gif 50MB`와 동영상 `mp4 500MB`, `mov 500MB`, `webm 300MB`로 단순 제한한다.
- How: 드롭 시 임시 저장과 URL 발급 수행 -> 게시 상태 변경 시 보존/삭제를 자동 실행 -> 최적화는 메타데이터 제거와 무손실 리패키징만 허용하고 재인코딩 기반 손실 압축을 금지한다.
- Why: 파일 품질을 훼손하지 않으면서도 업로드 안정성과 저장소 관리 가능성을 확보해야 한다.
- Impact: 작성자는 외부 스토리지 없이 빠르게 미디어를 삽입하고 운영자는 파일 정책을 예측 가능하게 유지한다.
- Risk: 무손실 정책은 절감 가능한 용량 폭이 제한되어 로컬 저장소 증가 속도가 빨라질 수 있다.

---

### Category: Data Platform

#### Intent

- Goal: 모든 서비스 데이터를 MongoDB 중심으로 통합하고 게시물 본문은 GitHub 실시간 백업을 유지한다.
- Success: post 및 부가 데이터 조회·저장이 MongoDB에서 수행되고 게시물 본문 변경은 GitHub에 실시간 백업 커밋으로 동기화된다.

#### Context

- Current State: 현재 post 및 서비스 정보 로딩이 GitHub 소스 의존 구조다.
- Constraints: 모든 DB는 MongoDB를 사용해야 하고 게시물 내용은 백업 및 커밋 기록 목적으로 GitHub에 실시간 저장되어야 한다.
- Trend Signal: 요청이 데이터 운영 경로를 MongoDB로 일원화하면서 Git 기반 백업 이중 안전장치를 유지하도록 요구한다.

#### Idea

- What: 운영 데이터의 주 저장소를 MongoDB로 전환하고 게시물 본문 변경 이벤트마다 GitHub 백업 저장을 실시간으로 수행한다.
- How: 읽기/쓰기 API를 MongoDB 중심으로 재배치 -> 게시물 변경 이벤트에 GitHub 동기화 훅 연결 -> MongoDB 기준 데이터 스키마로 통합 정리한다.
- Why: 실서비스 데이터 접근 성능과 관리 확장성을 확보하면서 백업 추적성을 유지할 수 있다.
- Impact: 데이터 경로가 단순해지고 장애 대응 시 GitHub 백업 로그를 즉시 활용할 수 있다.
- Risk: MongoDB와 GitHub 간 동기화 실패를 감지·복구하지 않으면 데이터 정합성 이슈가 누적될 수 있다.

---

### Category: Infra Operation

#### Intent

- Goal: 보유 도메인과 맥미니 온프레미스 운영 조건을 기준으로 배포 구조를 명확히 확정한다.
- Success: `blog.yena.io.kr`가 로컬 맥미니 서비스에 연결되어 외부에서 안정적으로 접근 가능하다.

#### Context

- Current State: 프로젝트는 `blog.yena.io.kr` 도메인을 보유하고 있고 온프레미스 로컬 운영 의도가 정해져 있다.
- Constraints: 배포는 온프레미스 맥미니를 기본으로 하고 도메인 연결과 상시 운영 절차를 충족해야 한다.
- Trend Signal: 요청이 클라우드 중심 대신 소유 인프라 기반 운영을 지속하려는 방향을 명확히 제시한다.

#### Idea

- What: 맥미니 로컬 환경에서 블로그 서비스를 상시 구동하고 `blog.yena.io.kr`를 해당 런타임으로 연결하는 온프레미스 운영 구성을 적용한다.
- How: 맥미니 프로세스 상시 실행 구성 -> DNS와 라우팅 연결 고정 -> 로그·백업·복구를 포함한 운영 절차 표준화한다.
- Why: 인프라 통제권과 개인 운영 목적을 유지하면서 서비스 운영을 단순화할 수 있다.
- Impact: 운영자가 비용·정책·배포 시점을 직접 통제하는 일관된 운영 모델이 완성된다.
- Risk: 단일 장비 장애에 대한 대비가 약하면 가용성과 복구 시간이 크게 흔들릴 수 있다.

## Decision

- Summary: 본 계획은 로그인 UX 명확화, 확장자별 미디어 정책 확정, 창의적 홈 지표 도입, MongoDB 중심 데이터 통합, 온프레미스 배포 고정으로 usability와 scalability를 동시에 확보하는 단일 실행 문서로 확정한다.

## Questions

- 현재 미해결 사실 확인 항목은 없다.
